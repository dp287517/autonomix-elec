<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>AutonomiX — Abonnement ATEX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body{ background:#0b0c0f; color:#e7e7e7; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    .card{ background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02)); border-color: rgba(255,255,255,.12); }
    .plan{ background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.1); border-radius:18px; padding:18px; height:100%; }
    .tag{ display:inline-block; padding:4px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.1); color:#d6d6d6; font-size:12px; }
  </style>
</head>
<body class="container py-4">
  <a href="dashboard.html" class="btn btn-outline-light btn-sm mb-3">← Retour</a>
  <h1 class="h4 mb-1">Abonnement — Suite ATEX</h1>
  <p class="text-secondary">Free → Control · Personal → Control+EPD · Pro → Control+EPD+IS Loop</p>
  <p id="currentPlan" class="text-secondary">Licence actuelle : chargement…</p>

  <div class="row g-3 mb-4">
    <div class="col-12 col-md-4">
      <div class="plan h-100 d-flex flex-column">
        <div class="d-flex align-items-center justify-content-between mb-2">
          <h2 class="h6 m-0">Free</h2><span class="tag">0 €</span>
        </div>
        <ul class="mb-3">
          <li>ATEX Control</li>
          <li class="text-secondary">EPD</li>
          <li class="text-secondary">IS Loop</li>
        </ul>
        <button class="btn btn-light mt-auto" data-plan="0">Choisir Free</button>
      </div>
    </div>
    <div class="col-12 col-md-4">
      <div class="plan h-100 d-flex flex-column">
        <div class="d-flex align-items-center justify-content-between mb-2">
          <h2 class="h6 m-0">Personal</h2><span class="tag">€</span>
        </div>
        <ul class="mb-3">
          <li>ATEX Control</li>
          <li>EPD</li>
          <li class="text-secondary">IS Loop</li>
        </ul>
        <button class="btn btn-primary mt-auto" data-plan="1">Choisir Personal</button>
      </div>
    </div>
    <div class="col-12 col-md-4">
      <div class="plan h-100 d-flex flex-column">
        <div class="d-flex align-items-center justify-content-between mb-2">
          <h2 class="h6 m-0">Pro</h2><span class="tag">€€</span>
        </div>
        <ul class="mb-3">
          <li>ATEX Control</li>
          <li>EPD</li>
          <li>IS Loop</li>
        </ul>
        <button class="btn btn-success mt-auto" data-plan="2">Choisir Pro</button>
      </div>
    </div>
  </div>

  <div class="row g-3">
    <div class="col-12 col-lg-6">
      <div class="card p-3">
        <h2 class="h6">Inviter quelqu’un sur le compte</h2>
        <p class="text-secondary">L’invitation augmente automatiquement le nombre de sièges et assigne un siège.</p>
        <div class="input-group mb-2">
          <input type="email" id="inviteEmail" class="form-control" placeholder="email@domaine.com">
          <select id="inviteRole" class="form-select" style="max-width:160px">
            <option value="member">Membre</option>
            <option value="admin">Admin</option>
          </select>
          <button id="inviteBtn" class="btn btn-primary">Inviter</button>
        </div>
        <div id="inviteMsg" class="small"></div>
      </div>
    </div>
    <div class="col-12 col-lg-6">
      <div class="card p-3">
        <h2 class="h6">Membres & sièges</h2>
        <div id="membersBox" class="small text-secondary">Chargement…</div>
      </div>
    </div>
  </div>

  <div class="row g-3 mt-4">
    <div class="col-12">
      <div class="card p-3">
        <h2 class="h6">Créer un nouvel espace de travail</h2>
        <div class="row g-2 align-items-end">
          <div class="col-12 col-md-5">
            <label class="form-label">Nom de l’espace</label>
            <input type="text" id="newAccountName" class="form-control" placeholder="Ex: Atelier Sud – Ligne A">
          </div>
          <div class="col-12 col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="copyPlan">
              <label class="form-check-label" for="copyPlan">Copier le plan ATEX actuel</label>
            </div>
          </div>
          <div class="col-12 col-md-3 text-end">
            <button id="createAccountBtn" class="btn btn-outline-light w-100">Créer</button>
          </div>
        </div>
        <div id="createMsg" class="small text-secondary mt-2"></div>
      </div>
    </div>
  </div>

  <script>window.API_BASE_URL = window.API_BASE_URL || '';</script>
  <script src="js/subscription_atex.js" defer></script>
</body>
</html>
